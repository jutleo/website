---
layout: post
title: "Hibernate与Ibites数据持久化选型"
tagline: "Hibernate Cache"
categories: ORM
description: "1、在系统建设过程中有大量的业务信息需要保存便于后期处理或查看;<br/>2、保险企业总是期望它的代表业务信息的数据或对象能够独立与使用它们的系统之外而存在;<br/>
3、多个系统需要共用一些代表业务信息的数据或对象;"
tags: Hibernate
---

##什么是持久化
&emsp;持久化就是对数据和程序状态的保持。大多数情况下特别是企业级开发应用时，数据持久化往往也就意味着将内存中的数据保存到磁盘上加以固化，而持久化的实现过程则大多通过各种关系型数据库来完成的。
##为什么要做数据持久化
&emsp;(1)	在系统建设过程中有大量的业务信息需要保存便于后期处理或查看；  
&emsp;(2)	保险企业总是期望它的代表业务信息的数据或对象能够独立与使用它们的系统之外而存在；  
&emsp;(3)	多个系统需要共用一些代表业务信息的数据或对象。  
##持久化的典型实现架构
&emsp;&emsp;&emsp;&emsp;&emsp;![持久化的典型实现架构](/static/img/20131206001.jpg)
##O/R映射好处
&emsp;(1)	可以不必编写重复的JDBC代码处理领域对象的实例（意味着编写的代码少，缩短开发周期；进一步意味着维护的代码少，意味着容易维护）;  
&emsp;(2)	透明持久化：完善的O/R映射工具可以在事务提交时自动将修改后的数据持久化到数据库。正如前面所说，只有真正被修改的数据才会被提交，应用代码无需进行任何脏数据检查;  
##何时使用O/R映射
&emsp;(1)	针对领域对象的“加载/编辑/存储”流程；  
&emsp;(2)	对象以批量查询的方式取出，但更新和删除则是单独进行的；  
&emsp;(3)	大量对象需要积极的缓存（通常出现在“读操作远多于写操作”的情况下，如Web应用）；  
&emsp;(4)	在领域对象与数据库表/字段之间有一个相当自然的对应关系；  
&emsp;(5)	不需要对SQL进行特别的优化。在大多数时候，好的`O/R`映射解决方案可以把生成的SQL优化得相当好，例如`Hibernate`的“方言”`（dialect）`支持；但一些特殊的`SQL`优化只有在完全关系型的方式下才可能进行。
##常用O/R映射框架对比
![持久化的典型实现架构](/static/img/20131206002.jpg)  
![持久化的典型实现架构](/static/img/20131206003.jpg)  
##使用推荐
&emsp;`Hibernate`与`Ibatis`都是成熟的，被广泛应用的JEE持久化框架，对于该框架的对比选用，除了框架本身在技术层面的差异之外，也与公司的在技术层面的定位、系统的特征以及技术团队的能力等多方面的因素有关，需要“因人而异，因地制宜”。

###系统因素：
&emsp;对于一个全新的，从头开始设计的项目，可以考虑使用`Hibernate`。反之建议使用`Ibatis`。
	`Ibatis` 的作者 Clinton Begin 针对`Hibernate` 和`Ibatis`的比较选型，就系统因素的建议如下：  
**“如果你开始一个新项目，你完全控制你的对象模型和数据库设计，Hibernate是一个不错的选择的O/R工具。"**  
  
&emsp;如果您正在访问的任何第三方的数据库（如供应商提供），或你与遗留数据库，或者甚至只是一个数据库设计真的很差，然后一个O / R映射可能不能够处理的情况。这是被一个SQL映射派上用场”。

###团队因素
&emsp;如果团队具有对Hibernate理解深入有相当使用经验的人员，建议使用Hibernate。反之，团队具有结构化设计、对SQL应用开发丰富经验的人员，建议使用Ibatis。熟练程度相等的情况下，Ibatis的学习成本更低，更快。

###设计方法与手段
&emsp;业务功能以及数据模型的设计均倾向于是使用OO技术的项目和团队，建议选用Hibernate框架。反之，建议使用IBits框架

##性能与优化的考虑
###Hibernate优势与缺点：
&emsp;能够在数据库至少提供多级缓存功能，可在业务交易处理为主的系统中发挥很大的作用。  
&emsp;不适合在业务处理之外的数据关联查询，特别是综合查询。建议结合JDBC或Hibernate 对本地SQL的支持通过本地SQL完成。
###IBITS优势与缺点：
&emsp;SQL通过配置管理并且是本地SQL，方便DBA与开发人员一起调整。  
  
    
&emsp;没有提供应用层面的缓存功能，如需要此功能，需要自行管理数据缓存。
