---
layout: post
title: "谈谈前端开发中的解耦"
tagline: "Deveplopment Decoupling"
description: "将一个表单分为模型和UI，数据交互依靠模型交互，只有需要UI更新请求时才会更新视图。"
category: javascript
tags: [apache proxy]
---

###思考


现实开发中经常会遇到这种情况：一个人开发一个功能，从前端的HTML、JS 到后端的业务功能，一气下来。繁琐、容易出错、开发周期长、bug高，整体的码思路估计也不怎么地；  

项目中，我一直提倡一种思路，整理好你的输入和输出，剩下的就是实现你的逻辑，把精力都集中在你的代码逻辑上；这正好和TDD的思路类似，把功能点剥离，变小，变精！  
使用输入和输出去规范或者说测试功能点的覆盖；    

这样可以借鉴TDD的思路功能点切分为二，准备你的数据、实现你的逻辑，只要你的输入是对的，输出符合规定，内部逻辑可以做的很精细和优美。对于开发人员更是分工明确。  

去看看Swing的设计吧，典型的MVC思路，每个控件都有一套属于自己的模型和UI，通过修改模型，操控模型数据，UI会发生相应的改变。  
TDD 更多侧重的后端的单元测试，对于前端如何呢？  

###再来看看前端设计：   

1、表单A 和 表单B 在同一页面上，在提交时，需要将A、B都一起提交，OK 没问题；做的很顺手。  
2、为了提高界面交互效果，两个表单要做一些数据项联动等交互功能，使用JS写吧，噩梦开始了，一堆一堆的JS,尤其是业务系统的管控。  
3、突然业务部门提出来一些有意思的交互数据管控，OH，我的天啊，前端好痛苦啊，哪哪都是脚本。

###如何借鉴MVC呢？  

对于表单A 分为ModelA和UIA，当用户做操作时，将ModelA和UIA始终保持同步，数据项、属性值发生变化之后通知修改UIA。表单B同样如此；    
整个功能的实现依靠算法和各种操作融合实现模型和UI统一， 这样当A 和 B 交互就变成了 ModelA 和 ModelB的交互，是不是简化了繁琐的JS操作dom呢？   

现在有大量成熟的技术可以使用，前端模版引擎处理DOM、事件监听可协调交互等。  

将原有复杂的页面切分为多个数据模型及对应的UI展现，数据交互依靠模型来完成，在合适的时机触发更新对应UI的操作更新用户界面，这就是解耦，代码清晰了。
