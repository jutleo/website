<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>iReport+jasperReport之NoXML</title>
        <meta name="viewport" content="width=device-width">
        <link rel="stylesheet" href="/static/bootstrap/css/bootstrap.min.css">
        <!-- Custom CSS -->
        <link rel="stylesheet" href="/static/css/leo.css">
        <link rel="stylesheet" href="/static/css/prettify.css">

    </head>
    <body>
      <div class="leo-head">
        <ul class="leo-nav">
  
    <li><a class="leo-nav-item" href="/">首页</a></li>
  
    <li><a class="leo-nav-item" href="/category.html">归档</a></li>
  
    <li><a class="leo-nav-item" href="/andy.html">豆豆</a></li>
  
    <li><a class="leo-nav-item last" href="/contant.html">联系我</a></li>
  
</ul>

      </div>
          </div>
      <div class="container">
        <div class="row">
          <div class="col-md-8"><div class="leo-category"><h1 class="leo-articel-title">iReport+jasperReport之NoXML</h1>
<div class="post">
<p>jasperReport的这个包net.sf.jasperreports.engine.design 是这样描述的：<br>
<code>Contains design time implementations for the library&#39;s main interfaces as well as report compiling tools.</code><br>
因此我们完全可以使用它的API构建自己的报表，还是和前几篇使用同一个数据库表。  </p>

<p><strong><em>构建JasperDesign对象：</em></strong><br>
设置一些对应的属性：  </p>
<div class="highlight"><pre><code class="language-text" data-lang="text">// JasperDesign
JasperDesign jasperDesign = new JasperDesign();
jasperDesign.setName(&quot;NoXmlDesignReport&quot;);
jasperDesign.setPageWidth(595);
jasperDesign.setPageHeight(842);
jasperDesign.setColumnWidth(515);
jasperDesign.setColumnSpacing(0);
jasperDesign.setLeftMargin(40);
jasperDesign.setRightMargin(40);
jasperDesign.setTopMargin(50);
jasperDesign.setBottomMargin(50);
</code></pre></div>
<p>字体：  </p>
<div class="highlight"><pre><code class="language-text" data-lang="text">// Fonts
JRDesignStyle normalStyle = new JRDesignStyle();
normalStyle.setName(&quot;Arial_Normal&quot;);
normalStyle.setDefault(true);
normalStyle.setFontName(&quot;Arial&quot;);
normalStyle.setFontSize(12);
normalStyle.setPdfFontName(&quot;Helvetica&quot;);
normalStyle.setPdfEncoding(&quot;Cp1252&quot;);
normalStyle.setPdfEmbedded(false);
jasperDesign.addStyle(normalStyle);

JRDesignStyle boldStyle = new JRDesignStyle();
boldStyle.setName(&quot;Arial_Bold&quot;);
boldStyle.setFontName(&quot;Arial&quot;);
boldStyle.setFontSize(12);
boldStyle.setBold(true);
boldStyle.setPdfFontName(&quot;Helvetica-Bold&quot;);
boldStyle.setPdfEncoding(&quot;Cp1252&quot;);
boldStyle.setPdfEmbedded(false);
jasperDesign.addStyle(boldStyle);

JRDesignStyle italicStyle = new JRDesignStyle();
italicStyle.setName(&quot;Arial_Italic&quot;);
italicStyle.setFontName(&quot;Arial&quot;);
italicStyle.setFontSize(12);
italicStyle.setItalic(true);
italicStyle.setPdfFontName(&quot;Helvetica-Oblique&quot;);
italicStyle.setPdfEncoding(&quot;Cp1252&quot;);
italicStyle.setPdfEmbedded(false);
jasperDesign.addStyle(italicStyle);
</code></pre></div>
<p>定义报表的参数，并添加到报表设计器上  </p>
<div class="highlight"><pre><code class="language-text" data-lang="text">// Parameters
JRDesignParameter parameter = new JRDesignParameter();
parameter.setName(&quot;ReportTitle&quot;);
parameter.setValueClass(java.lang.String.class);
jasperDesign.addParameter(parameter);  
</code></pre></div>
<p>定义报表的字段，这些字段是最终显示到报表上的域  </p>
<div class="highlight"><pre><code class="language-text" data-lang="text">// Fields
JRDesignField field = new JRDesignField();
field.setName(&quot;userid&quot;);
field.setValueClass(java.lang.Integer.class);
jasperDesign.addField(field);

field = new JRDesignField();
field.setName(&quot;name&quot;);
field.setValueClass(java.lang.String.class);
jasperDesign.addField(field);

field = new JRDesignField();
field.setName(&quot;sex&quot;);
field.setValueClass(java.lang.String.class);
jasperDesign.addField(field);

field = new JRDesignField();
field.setName(&quot;age&quot;);
field.setValueClass(java.lang.String.class);
jasperDesign.addField(field);

field = new JRDesignField();
field.setName(&quot;password&quot;);
field.setValueClass(java.lang.String.class);
jasperDesign.addField(field);

field = new JRDesignField();
field.setName(&quot;department&quot;);
field.setValueClass(java.lang.String.class);
jasperDesign.addField(field);

JRDesignBand band = null;
JRDesignTextField textField = null;
JRDesignExpression expression = null;  
</code></pre></div>
<p>开始画报表主体的title部分，不需要的部分可以不用代码标识出来，title部分放置了报表标题字段，只会出现在第一页的上方  </p>
<div class="highlight"><pre><code class="language-text" data-lang="text">// title
band = new JRDesignBand();
band.setHeight(50);
textField = new JRDesignTextField();
textField.setBlankWhenNull(true);
textField.setX(0);
textField.setY(10);
textField.setWidth(500);
textField.setHeight(30);
textField.setHorizontalAlignment(JRAlignment.HORIZONTAL_ALIGN_CENTER);
textField.setStyle(normalStyle);
textField.setFontSize(22);
expression = new JRDesignExpression();
expression.setValueClass(java.lang.String.class);
expression.setText(&quot;$P{ReportTitle}&quot;);
textField.setExpression(expression);
band.addElement(textField);
jasperDesign.setTitle(band);  
</code></pre></div>
<p>detail部分：排列域的位置，并设置它的值，没一个域的值会最为一个 JRDesignExpression出现  </p>
<div class="highlight"><pre><code class="language-text" data-lang="text">// Detail
// pid
band = new JRDesignBand();
band.setHeight(20);

textField = new JRDesignTextField();
textField.setX(5);
textField.setY(4);
textField.setWidth(100);
textField.setHeight(15);
textField.setHorizontalAlignment(JRAlignment.HORIZONTAL_ALIGN_RIGHT);
textField.setStyle(normalStyle);
expression = new JRDesignExpression();
expression.setValueClass(java.lang.Integer.class);
expression.setText(&quot;$F{userid}&quot;);
textField.setExpression(expression);
band.addElement(textField);
// name
textField = new JRDesignTextField();
textField.setStretchWithOverflow(true);
textField.setX(120);
textField.setY(4);
textField.setWidth(80);
textField.setHeight(15);
textField.setPositionType(JRElement.POSITION_TYPE_FLOAT);
textField.setStyle(normalStyle);
expression = new JRDesignExpression();
expression.setValueClass(java.lang.String.class);
expression.setText(&quot;$F{name}&quot;);
textField.setExpression(expression);
band.addElement(textField);

// sex
textField = new JRDesignTextField();
textField.setStretchWithOverflow(true);
textField.setX(200);
textField.setY(4);
textField.setWidth(30);
textField.setHeight(15);
textField.setPositionType(JRElement.POSITION_TYPE_FLOAT);
textField.setStyle(normalStyle);
expression = new JRDesignExpression();
expression.setValueClass(java.lang.String.class);
expression.setText(&quot;$F{sex}&quot;);
textField.setExpression(expression);
band.addElement(textField);
// age
textField = new JRDesignTextField();
textField.setStretchWithOverflow(true);
textField.setX(240);
textField.setY(4);
textField.setWidth(30);
textField.setHeight(15);
textField.setPositionType(JRElement.POSITION_TYPE_FLOAT);
textField.setStyle(normalStyle);
expression = new JRDesignExpression();
expression.setValueClass(java.lang.String.class);
expression.setText(&quot;$F{age}&quot;);
textField.setExpression(expression);
band.addElement(textField);
// password
textField = new JRDesignTextField();
textField.setStretchWithOverflow(true);
textField.setX(270);
textField.setY(4);
textField.setWidth(80);
textField.setHeight(15);
textField.setPositionType(JRElement.POSITION_TYPE_FLOAT);
textField.setStyle(normalStyle);
expression = new JRDesignExpression();
expression.setValueClass(java.lang.String.class);
expression.setText(&quot;$F{password}&quot;);
textField.setExpression(expression);
band.addElement(textField);
// department
textField = new JRDesignTextField();
textField.setStretchWithOverflow(true);
textField.setX(350);
textField.setY(4);
textField.setWidth(80);
textField.setHeight(15);
textField.setPositionType(JRElement.POSITION_TYPE_FLOAT);
textField.setStyle(normalStyle);
expression = new JRDesignExpression();
expression.setValueClass(java.lang.String.class);
expression.setText(&quot;$F{department}&quot;);
textField.setExpression(expression);
band.addElement(textField);  
</code></pre></div>
<p>JasperReport对象可以使用下面这句产生：  </p>
<div class="highlight"><pre><code class="language-text" data-lang="text">JasperCompileManager.compileReport(jasperDesign);
</code></pre></div>
<p>至此一个完整的报表就可以显示出来了。</p>

</div>
<p class="leo-protect">
  作者：
  <a href="/">leo</a>
  　发布时间：2013年04月27日
  <br>
  原文：
  <a href="/2013/04/27/iReport-jasperReport-07">iReport+jasperReport之NoXML</a>
  <br>
  标签： iReport、jasperReport
  <br/>
  版权所有，转载时必须以链接形式注明作者和原出处并保留本声明。
  <br>
</p>
<script type="text/javascript" src="/static/js/jquery-1.8.3.min.js"></script>
<script type="text/javascript" src="/static/js/prettify.js"></script>
<script type="text/javascript">
  $(function(){
    $("pre").addClass("prettyprint linenums");
    prettyPrint();
  });
</script>

<!-- Duoshuo Comment BEGIN -->
  <div class="ds-thread"></div>
<script type="text/javascript">
var duoshuoQuery = {short_name:"jutleo"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = 'http://static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
  </script>
<!-- Duoshuo Comment END --></div></div>
          <div class="col-md-4">
            <div class="list-group">
              <a href="#" class="list-group-item list-group-item-success disabled">分类</a>
              
              <a href="/db/"  class="list-group-item" title="查看所有此分类文章列表"><span class="badge">1</span>db </a>
              
              <a href="/server/"  class="list-group-item" title="查看所有此分类文章列表"><span class="badge">2</span>server </a>
              
              <a href="/office/"  class="list-group-item" title="查看所有此分类文章列表"><span class="badge">1</span>office </a>
              
              <a href="/javascript/"  class="list-group-item" title="查看所有此分类文章列表"><span class="badge">6</span>javascript </a>
              
              <a href="/ireport/"  class="list-group-item" title="查看所有此分类文章列表"><span class="badge">15</span>ireport </a>
              
              <a href="/blog/"  class="list-group-item" title="查看所有此分类文章列表"><span class="badge">1</span>blog </a>
              
              <a href="/orm/"  class="list-group-item" title="查看所有此分类文章列表"><span class="badge">2</span>orm </a>
              
              <a href="/technology/"  class="list-group-item" title="查看所有此分类文章列表"><span class="badge">1</span>technology </a>
              
              <a href="/life/"  class="list-group-item" title="查看所有此分类文章列表"><span class="badge">3</span>life </a>
              
              <a href="/spring/"  class="list-group-item" title="查看所有此分类文章列表"><span class="badge">5</span>spring </a>
              
            </div>
            <div class="leo-article-category">
              <iframe width="100%" height="550" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=550&fansRow=2&ptype=1&speed=0&skin=1&isTitle=1&noborder=1&isWeibo=1&isFans=1&uid=2975520964&verifier=eac976c7&dpc=1"></iframe>
            </div>

          </div>
      </div>

        </div>
        
      <div class="leo-foot">
        <p>
 Copyright &copy; 2010 - 2014 &nbsp;jutleo@gmail.com. 保留所有权利。
</p>
      </div>
    </body>
</html>
