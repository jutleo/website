<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>iReport+jasperReport概念的澄清二</title>
        <meta name="viewport" content="width=device-width">
        <link rel="stylesheet" href="/static/bootstrap/css/bootstrap.min.css">
        <!-- Custom CSS -->
        <link rel="stylesheet" href="/static/css/leo.css">
        <link rel="stylesheet" href="/static/css/prettify.css">

    </head>
    <body>
      <div class="leo-head">
        <ul class="leo-nav">
  
    <li><a class="leo-nav-item" href="/">首页</a></li>
  
    <li><a class="leo-nav-item" href="/category.html">归档</a></li>
  
    <li><a class="leo-nav-item" href="/andy.html">豆豆</a></li>
  
    <li><a class="leo-nav-item last" href="/contant.html">联系我</a></li>
  
</ul>

      </div>
          </div>
      <div class="container">
        <div class="row">
          <div class="col-md-8"><div class="leo-category"><h1 class="leo-articel-title">iReport+jasperReport概念的澄清二</h1>
<div class="post">
<p><strong>JasperReport有三个域用来存放、展示数据，Parameter、Field、Variables，这次说说这三个吧！</strong></p>

<h3>Report Parameters</h3>

<p>JasperReport 报表的参数是最为一个object类型的参数传递的，通常我们在jrxml文件中会这样定义  </p>
<div class="highlight"><pre><code class="language-text" data-lang="text">&lt;parameter name=&quot;ReportTitle&quot; class=&quot;java.lang.String&quot;/&gt;
</code></pre></div>
<p>顾名思义，参数是用来传递给报表的，通常我们会动态的传递一个参数给报表作为报表的标题，传递给自报表一个参数用来作为自报表查询的条件等等。
jasperReport内置了几个有用的参数：REPORT<em>SCRIPTLET引用外部的scriptlet，REPORT</em>LOCALE引用国际化preperty文件使用的，
REPORT_CONNECTION传递报表JDBC连接参数使用的等等。  </p>
<div class="highlight"><pre><code class="language-text" data-lang="text">public Map getMap() {
    Map map = new HashMap();
    map.put(&quot;reportTitle&quot;, &quot;laoshulin&quot;);
    return map;
}
</code></pre></div>
<p>程序运行的时候就会动态的赋值给ReportTitle这个参数,下面这个是报表运行时需要的connection参数，是动态传递给子报表的。</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">&lt;connectionExpression&gt;&lt;![CDATA[$P{REPORT_CONNECTION}]]&gt;&lt;/connectionExpression&gt;
</code></pre></div>
<p>我们在程序运行的时候的时候可以把一个打开的连接传给REPORT_CONNECTION参数：  </p>
<div class="highlight"><pre><code class="language-text" data-lang="text">parameters.put(&quot;REPORT_CONNECTION&quot;, getConnection());  
</code></pre></div>
<h3>Report Field</h3>

<p>field是用来展现数据的域，也是最常用的一个，采用JDBC时iReport可以在我们写入SQL时自动检测到所有的field，
有时我们需要自己手动建立一些field，这个字段没有什么好说的，我们可以在iReport设置它的各种属性。以后碰到的时候在说。  </p>

<h3>Report Variables</h3>

<p>提起Variables不能不提expression，report expression是jasperReport一个非常实用的组件，它可以用来执行各种计算，修饰各个字段的数据。如:  </p>
<div class="highlight"><pre><code class="language-text" data-lang="text">&lt;textFieldExpression&gt;
$F{FirstName} + &quot; &quot; + $F{LastName}
&lt;/textFieldExpression&gt;

&lt;textFieldExpression&gt;
    &quot;Max Order ID is : &quot; + $P{MaxOrderID}
&lt;/textFieldExpression&gt;  
</code></pre></div>
<p>报表变量是建立在表达式上的一个特殊的用来简化报表设计，一个变量可以执行内置类型的计算以及相应表达式，如：总数，总和、平均数、最低值、最高值、差额等等。  </p>
<div class="highlight"><pre><code class="language-text" data-lang="text">&lt;variable name=&quot;QuantitySum&quot; 
    class=&quot;java.lang.Double&quot; calculation=&quot;Sum&quot;&gt;
    &lt;variableExpression&gt;$F{Quantity}&lt;/variableExpression&gt;
&lt;/variable&gt;  
</code></pre></div>
<p>JasperReport内置了一些变量<br>
PAGE<em>NUMBER 页数<br>
COLUMN</em>NUMBER 列数<br>
REPORT<em>COUNT 报表总数<br>
PAGE</em>COUNT  当前页数<br>
COLUMN_COUNT 列总数  </p>

<p>值得一提的是JasperReport还有一个比较强大的功能就是parameter/field/variables都支持html语言<br>
<img src="/static/img/20130422004.jpg" alt="HTML支持"><br>
设置Markup为HTML时就可以在Text Field Expression 中写入html标记了  </p>
<div class="highlight"><pre><code class="language-text" data-lang="text">&lt;font color=&#39;blue&#39; size=&#39;5&#39;&gt;&quot;+$P{reportTitle}+&quot;&lt;/font&gt;
</code></pre></div>
<p>当报表预览的时候就可以直接看到html的效果了。  </p>

</div>
<p class="leo-protect">
  作者：
  <a href="/">leo</a>
  　发布时间：2013年04月22日
  <br>
  原文：
  <a href="/2013/04/22/iReport-jasperReport-02">iReport+jasperReport概念的澄清二</a>
  <br>
  标签： iReport、jasperReport
  <br/>
  版权所有，转载时必须以链接形式注明作者和原出处并保留本声明。
  <br>
</p>
<script type="text/javascript" src="/static/js/jquery-1.8.3.min.js"></script>
<script type="text/javascript" src="/static/js/prettify.js"></script>
<script type="text/javascript">
  $(function(){
    $("pre").addClass("prettyprint linenums");
    prettyPrint();
  });
</script>

<!-- Duoshuo Comment BEGIN -->
  <div class="ds-thread"></div>
<script type="text/javascript">
var duoshuoQuery = {short_name:"jutleo"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = 'http://static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
  </script>
<!-- Duoshuo Comment END --></div></div>
          <div class="col-md-4">
            <div class="list-group">
              <a href="#" class="list-group-item list-group-item-success disabled">分类</a>
              
              <a href="/db/"  class="list-group-item" title="查看所有此分类文章列表"><span class="badge">1</span>db </a>
              
              <a href="/server/"  class="list-group-item" title="查看所有此分类文章列表"><span class="badge">2</span>server </a>
              
              <a href="/office/"  class="list-group-item" title="查看所有此分类文章列表"><span class="badge">1</span>office </a>
              
              <a href="/javascript/"  class="list-group-item" title="查看所有此分类文章列表"><span class="badge">6</span>javascript </a>
              
              <a href="/ireport/"  class="list-group-item" title="查看所有此分类文章列表"><span class="badge">15</span>ireport </a>
              
              <a href="/blog/"  class="list-group-item" title="查看所有此分类文章列表"><span class="badge">1</span>blog </a>
              
              <a href="/orm/"  class="list-group-item" title="查看所有此分类文章列表"><span class="badge">2</span>orm </a>
              
              <a href="/technology/"  class="list-group-item" title="查看所有此分类文章列表"><span class="badge">1</span>technology </a>
              
              <a href="/life/"  class="list-group-item" title="查看所有此分类文章列表"><span class="badge">3</span>life </a>
              
              <a href="/spring/"  class="list-group-item" title="查看所有此分类文章列表"><span class="badge">5</span>spring </a>
              
            </div>
            <div class="leo-article-category">
              <iframe width="100%" height="550" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=550&fansRow=2&ptype=1&speed=0&skin=1&isTitle=1&noborder=1&isWeibo=1&isFans=1&uid=2975520964&verifier=eac976c7&dpc=1"></iframe>
            </div>

          </div>
      </div>

        </div>
        
      <div class="leo-foot">
        <p>
 Copyright &copy; 2010 - 2014 &nbsp;jutleo@gmail.com. 保留所有权利。
</p>
      </div>
    </body>
</html>
