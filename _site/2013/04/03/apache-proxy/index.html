<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>apache反向代理</title>
        <meta name="viewport" content="width=device-width">
        <link rel="stylesheet" href="/static/bootstrap/css/bootstrap.min.css">
        <!-- Custom CSS -->
        <link rel="stylesheet" href="/static/css/leo.css">
        <link rel="stylesheet" href="/static/css/prettify.css">

    </head>
    <body>
      <div class="leo-head">
        <ul class="leo-nav">
  
    <li><a class="leo-nav-item" href="/">首页</a></li>
  
    <li><a class="leo-nav-item" href="/category.html">归档</a></li>
  
    <li><a class="leo-nav-item" href="/andy.html">豆豆</a></li>
  
    <li><a class="leo-nav-item last" href="/contant.html">联系我</a></li>
  
</ul>

      </div>
          </div>
      <div class="container">
        <div class="row">
          <div class="col-md-8"><div class="leo-category"><h1 class="leo-articel-title">apache反向代理</h1>
<div class="post">
<h3>代理的功能</h3>

<ol>
<li>突破自身的访问限制。比如访问国外的站点时需要翻墙、内网通过代理上网、公司的内网限制上QQ等。<br></li>
<li>访问某些内部资源。 比如将某些内部资源暴露在外部区域。<br></li>
<li>提高访问的速度。代理服务器一般都会有较大的磁盘缓冲区，可以将客户机的请求缓存起来。</li>
<li>隐藏。 这个都知道了，可以隐藏真实的客户机地址。<br></li>
</ol>

<p>其它的暂时想不起来了，代理的作用用的时候才会发现，可以解决很多实际问题，转发、隐藏端口、跨域等等，很happy。</p>

<h3>正向代理、反向代理</h3>

<p><strong><em>正向代理</em></strong> 是需要设置在客户机上的，客户机需要配置代理，请求将会通过代理进行中转到目标机上，并通过代理服务器返回给客户机。一般来说代理机就是替代客户机去访问目标机。
客户机和正向代理机像是位于同一个局域网内。正向代理服务器的主要目的是缓存数据来响应客户端的 HTTP 请求，一般都会进行用户访问控制。  </p>

<p><img src="/static/img/20130403001.jpg" alt="正向代理">  </p>

<ol>
<li>访问无法访问的目标机；<br></li>
<li>加速访问速度；<br></li>
<li>Cache；</li>
<li>客户机访问授权；<br></li>
<li>隐藏客户机访问行踪；<br></li>
</ol>

<p><em>正向代理是介于客户机和目标机中间的机器，需要知道代理机的IP和端口，安全考虑需要用户和密码认证，目标机对于客户机是透明的，客户机访问目标机时，由代理机完成请求的中间转发，并返回给客户机</em>  </p>

<p><img src="/static/img/20130403002.jpg" alt="反向代理">  </p>

<p><strong><em>反向代理</em></strong> 和正向代理相反，目标机对于客户机是不知的。对于客户机来说，代理机就是目标机，由代理机去判断目标机在何处，并且客户机不需要任何设置。客户机像代理机发送请求，代理机将请求转向到目标机，并将返回
内容返给客户机。  一般反向代理应用最常见的是做负载均衡。</p>

<p>现在来说一下apache如何做代理 ：  </p>

<p>首先安装apache：安装基本next<br>
  修改conf/下的httpd.conf文件：    </p>

<p>去掉如下四项前面的<code>#</code>，</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">LoadModule proxy_module modules/mod_proxy.so  
LoadModule proxy_connect_module modules/mod_proxy_connect.so
LoadModule proxy_ftp_module modules/mod_proxy_ftp.so
LoadModule proxy_http_module modules/mod_proxy_http.so  
</code></pre></div>
<p>在文件最底下输入如下代码：   </p>
<div class="highlight"><pre><code class="language-text" data-lang="text">ProxyRequests Off
&lt;Proxy *&gt;
Order deny,allow
Allow from all
&lt;/Proxy&gt;

#以下为反向代理配置
ProxyPass /xxx http://jutleo.github.com
ProxyPassReverse /xxx http://jutleo.github.com  
</code></pre></div>
<p>当然反向代理可以配置多个</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">#以下为反向代理配置
ProxyPass /xxx http://jutleo.github.com
ProxyPassReverse /xxx http://jutleo.github.com
ProxyPass /yyy http://weibo.com/jutleo
ProxyPassReverse /yyy http://weibo.com/jutleo
</code></pre></div>
<p>客户机请求反向代理机，反向代理机找到实际的目标机地址将客户机请求转发给目标机，目标机返回给代理机、代理机返回给客户机。<code>ProxyPass</code>表示转发，如果
目标机定向后会绕过代理机将请求直接返回给客户机，<code>ProxyPassReverse</code>表示反向代理，目标机返回后，代理机会重新调整地址为代理机的地址。</p>

<p>ok, 重启apache，输入http://localhost/xxx试试吧！注意看地址栏变化。</p>

</div>
<p class="leo-protect">
  作者：
  <a href="/">leo</a>
  　发布时间：2013年04月03日
  <br>
  原文：
  <a href="/2013/04/03/apache-proxy">apache反向代理</a>
  <br>
  标签： apache proxy
  <br/>
  版权所有，转载时必须以链接形式注明作者和原出处并保留本声明。
  <br>
</p>
<script type="text/javascript" src="/static/js/jquery-1.8.3.min.js"></script>
<script type="text/javascript" src="/static/js/prettify.js"></script>
<script type="text/javascript">
  $(function(){
    $("pre").addClass("prettyprint linenums");
    prettyPrint();
  });
</script>

<!-- Duoshuo Comment BEGIN -->
  <div class="ds-thread"></div>
<script type="text/javascript">
var duoshuoQuery = {short_name:"jutleo"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = 'http://static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
  </script>
<!-- Duoshuo Comment END --></div></div>
          <div class="col-md-4">
            <div class="list-group">
              <a href="#" class="list-group-item list-group-item-success disabled">分类</a>
              
              <a href="/db/"  class="list-group-item" title="查看所有此分类文章列表"><span class="badge">1</span>db </a>
              
              <a href="/server/"  class="list-group-item" title="查看所有此分类文章列表"><span class="badge">2</span>server </a>
              
              <a href="/office/"  class="list-group-item" title="查看所有此分类文章列表"><span class="badge">1</span>office </a>
              
              <a href="/javascript/"  class="list-group-item" title="查看所有此分类文章列表"><span class="badge">6</span>javascript </a>
              
              <a href="/ireport/"  class="list-group-item" title="查看所有此分类文章列表"><span class="badge">15</span>ireport </a>
              
              <a href="/blog/"  class="list-group-item" title="查看所有此分类文章列表"><span class="badge">1</span>blog </a>
              
              <a href="/orm/"  class="list-group-item" title="查看所有此分类文章列表"><span class="badge">2</span>orm </a>
              
              <a href="/technology/"  class="list-group-item" title="查看所有此分类文章列表"><span class="badge">1</span>technology </a>
              
              <a href="/life/"  class="list-group-item" title="查看所有此分类文章列表"><span class="badge">3</span>life </a>
              
              <a href="/spring/"  class="list-group-item" title="查看所有此分类文章列表"><span class="badge">5</span>spring </a>
              
            </div>
            <div class="leo-article-category">
              <iframe width="100%" height="550" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=550&fansRow=2&ptype=1&speed=0&skin=1&isTitle=1&noborder=1&isWeibo=1&isFans=1&uid=2975520964&verifier=eac976c7&dpc=1"></iframe>
            </div>

          </div>
      </div>

        </div>
        
      <div class="leo-foot">
        <p>
 Copyright &copy; 2010 - 2014 &nbsp;jutleo@gmail.com. 保留所有权利。
</p>
      </div>
    </body>
</html>
